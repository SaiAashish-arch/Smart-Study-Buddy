<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Completed Tasks</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <nav>
    <h2>SMART STUDY BUDDY</h2>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="schedule.html">Schedule Tasks</a></li>
      <li><a href="completed.html">Completed Tasks</a></li>
    </ul>
    <button id="themeToggle" class="btn-small">Toggle Theme</button>
  </nav>
  <section class="container">
    <h2>Completed Tasks</h2>
    <table>
      <tr>
        <th>Task</th>
        <th>Completed Time</th>
        <th>Subject</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
      <tbody id="completedTable"></tbody>
    </table>
  </section>
  <script>
    let completed = JSON.parse(localStorage.getItem("completed")) || [];
    function displayCompleted() {
      const table = document.getElementById("completedTable");
      if (!table) return;
      table.innerHTML = "";
      // Sort completed tasks by latest first
      completed.sort((a, b) => new Date(b.completedTime) - new Date(a.completedTime));
      completed.forEach((t, i) => {
        table.innerHTML += `
          <tr>
            <td>${t.name}</td>
            <td>${t.completedTime}</td>
            <td>${t.subject}</td>
            <td>âœ”</td>
            <td><span class="btn-red" onclick="deleteCompleted(${i})">Delete</span></td>
          </tr>
        `;
      });
    }
    function deleteCompleted(index) {
      if (confirm("Are you sure you want to delete this completed task?")) {
        completed.splice(index, 1);
        localStorage.setItem("completed", JSON.stringify(completed));
        displayCompleted();
      }
    }
    const themeToggle = document.getElementById("themeToggle");
    themeToggle?.addEventListener("click", () => {
      document.body.classList.toggle("dark-bg");
    });
    displayCompleted();
  </script>
</body>
</html>

</section>
<script src="script.js"></script>
</body>
</html>
